vizlab: "0.2.2"
info:
  id: uswb-viz
  name: US Water Budgets
  date: 2017-10-10
  publish-date: 9999-01-01
  path: /us-water-budgets
  analytics-id: UA-78530187-1
  description: >-
    U.S. Water Budgets... TBC 
  audience: General public
  keywords: [ "water", "USGS", "VIZLAB", "water budget" ]
  url: https://owi.usgs.gov/vizlab/us-water-budgets/
  thumbnail:  
    url:  "none"  
    width: 250    
    height: 250    
    alttext: "some text here"
  thumbnail-landing: 
    url: "none"
  contributors:
    -
      name: David Blodgett
      email: dblodgett@usgs.gov
      affiliation: U.S. Geological Survey
  twitter: "@USGS_R"
  required-packages:
    vizlab:
      repo: GRAN
      version: 0.2.2
    dataRetrieval:
      repo: CRAN
      version: 2.6.3
    sp:
      repo: CRAN
      version: 1.2-4
    sf:
      repo: CRAN
      version: 0.5-4
    maps:
      repo: CRAN
      version: 3.1.1
    maptools:
      repo: CRAN
      version: 0.9-1
    xml2:
      repo: CRAN
      version: 1.1.1
    rgeos:
      repo: CRAN
      version: 0.3.21
    stringr:
      repo: CRAN
      version: 1.2.0
    caTools:
      repo: CRAN
      version: 1.17.1
    gsplot:
      repo: GRAN
      version: 0.7.3
    svglite: 
      repo: github
      version: 1.2.0.9003
      name: jread-usgs/svglite
      ref: svgnano_03
    NWCEd: 
      repo: github
      name: USGS-R/NWCEd
parameter:
  -
    id: parameter_spatial
    crs: '+init=epsg:2163'
    simplify_tolerance_m: 1000
fetch:
  -
    id: siteText
    location: data/siteText.yaml
    scripts:
    reader: md
    mimetype: text/yaml
  -
    id: fetch_HU_ids
    location: data/HU_ids.json
    mimetype: "application/json"
    scripts: 
  -
    id: fetch_huc12boundary
    location: cache/fetch_huc12boundary.geojson
    fetcher: sciencebase
    scripts:
    remoteItemId: 59e10108e4b05fe04cd000c8
    remoteFilename: usgs_huc12boundary_uswb.geojson
    reader: sf_reader
  -
    id: fetch_huc12boundary_atts
    location: cache/fetch_huc12boundary_atts.tsv
    fetcher: sciencebase
    scripts:
    remoteItemId: 59e10108e4b05fe04cd000c8
    remoteFilename: usgs_huc12boundary_uswb.tsv
    mimetype: text/tab-separated-values
  -
    id: fetch_huc12pp
    location: cache/fetch_huc12pp.geojson
    fetcher: sciencebase
    scripts:
    remoteItemId: 59e10108e4b05fe04cd000c8
    remoteFilename: usgs_huc12pp_uswb.geojson
    reader: sf_reader
  -
    id: fetch_huc12pp_atts
    location: cache/fetch_huc12pp_atts.tsv
    fetcher: sciencebase
    scripts:
    remoteItemId: 59e10108e4b05fe04cd000c8
    remoteFilename: usgs_huc12pp_uswb.tsv
    mimetype: text/tab-separated-values
  -
    id: fetch_nhdplusflowline
    location: cache/fetch_nhdplusflowline.geojson
    fetcher: sciencebase
    scripts:
    remoteItemId: 59e10108e4b05fe04cd000c8
    remoteFilename: usgs_nhdplusflowline_uswb.geojson
    reader: sf_reader
  -
    id: fetch_nwc_wb_data
    location: cache/fetch_nwc_wb_data.rds
    fetcher: fetch_nwc_wb_data
    scripts: scripts/fetch/fetch_nwc_wb_data.R
    depends: fetch_HU_ids
    reader: rds
process:
  -
    id: process_watershed_map_data
    location: cache/process_watershed_map_data.rds
    processor: process_watershed_map_data
    scripts: scripts/process/process_watershed_data.R
    depends: ["fetch_huc12boundary", "fetch_huc12pp", 
    "fetch_nhdplusflowline", "parameter_spatial"]
    reader: rds
  -
    id: process_watershed_annual_wb_data
    location: cache/process_watershed_annual_wb_data.rds
    processor: process_watershed_annual_wb_data
    scripts: scripts/process/process_watershed_data.R
    depends: ["fetch_nwc_wb_data"]
    reader: rds
  -
    id: process_watershed_por_wb_data
    location: cache/process_watershed_por_wb_data.rds
    processor: process_watershed_por_wb_data
    scripts: scripts/process/process_watershed_data.R
    depends: ["process_watershed_annual_wb_data"]
    reader: rds
  -
    id: process_map
    location: cache/process_map.rds
    processor: process_map
    scripts: scripts/process/process_map.R
    reader: rds
  -
    id: process_watermark
    location: cache/process_watermark.rds
    processor: process_watermark
    scripts: scripts/process/process_watermark.R
    reader: rds
visualize:
  -
    id: visualize_map
    location: figures/visualize_map.svg
    visualizer: visualize_map
    depends: ["process_map", "process_watermark",
    "process_watershed_map_data"]
    scripts: scripts/visualize/visualize_map.R
    mimetype: image/svg+xml
    orientation: vizlab-landscape
    export: true
    title: "U.S. Water Budgets"
    alttext: "Summary of water budgets for the conterminous US."
  -
    id: visualize_thumbnail_map_facebook
    location: figures/thumb-facebook.png
    visualizer: visualize_map_thumbnail
    scripts: ["scripts/visualize/visualize_map.R"]
    depends: ["process_map", "process_watermark"]
    fig-height: 820
    fig-width: 1560
  -
    id: visualize_thumbnail_map_twitter
    location: figures/thumb-twitter.png
    visualizer: visualize_map_thumbnail
    scripts: ["scripts/visualize/visualize_map.R"]
    depends: ["process_map", "process_watermark"]
    fig-height: 300
    fig-width: 560
  -
    id: visualize_thumbnail_map_landing
    location: figures/thumb-landing.png
    visualizer: visualize_map_thumbnail
    scripts: ["scripts/visualize/visualize_map.R"]
    depends: ["process_map", "process_watermark"]
    fig-height: 400
    fig-width: 400
publish:
  -
    id: publish_intro
    template: layout/templates/intro.mustache
    publisher: section
    depends: siteText
    context:
      data: ["siteText.title", "siteText.introText1"]
  -
    id: publish_map_section
    publisher: section
    template: layout/templates/figureTemplate.mustache
    depends:
      map: visualize_map
      siteText: siteText
    context:
      id: gage-map
      figure: map
      caption: siteText.explanationText1
  -
    id: publish_header
    publisher: section
    template: header-template
    context:
      title: Water Budgets Across the U.S.
  -
    id: publish_social_section
    publisher: section
    template: layout/templates/socialMedia.mustache
    depends:
      githubLogo: githubLogo
      twitterLogo: twitterLogo 
      facebookLogo: facebookLogo
    context:
      githubLogo: githubLogo
      twitterLogo: twitterLogo 
      facebookLogo: facebookLogo
  -
    id: publish_footer
    publisher: footer
    template: footer-template
    blogsInFooter: TRUE
    vizzies:
      -
        org: USGS-VIZLAB
        repo: hurricane-matthew
    blogs:
      -
        name: Using the dataRetrieval Stats Service
        url: https://owi.usgs.gov/blog/stats-service-map/
        thumbLoc: https://owi.usgs.gov/blog/static/stats-service-map/plot-1.png
  -
    id: publish_viz_css
    location: layout/css/viz.css
    mimetype: text/css
    publisher: resource
  -
    id: publish_svg_css
    location: layout/css/svg.css
    mimetype: text/css
    publisher: resource
  -
    id: publish_index
    name: index
    publisher: page
    template: fullpage
    depends:
      header: publish_header
      footer: publish_footer
      intro: publish_intro
      map-section: publish_map_section
      social-section: publish_social_section
      jquery-js: lib-jquery-js
      svg-injector-js: lib-svg-injector-js
      vizlab-js: lib-vizlab-javascript
      svg-css: publish_svg_css
      viz-css: publish_viz_css
      header-css: lib-header-css
      footer-css: lib-footer-css
    context:
      header: header
      footer: footer
      sections: [ "intro", "map-section", "social-section"]
      resources: [ "jquery-js", "vizlab-js", "svg-injector-js", 
      "header-css", "footer-css", "viz-css", "svg-css"]
  -
    id: githubLogo
    location: images/github.svg
    mimetype: image/svg
    inline: true
    title: "Github"
    alttext: "Github Logo"
  -
    id: twitterLogo
    location: images/twitter.svg
    mimetype: image/svg
    inline: true
    title: "Twitter"
    alttext: "Twitter Logo"
  -
    id: facebookLogo
    location: images/facebook.svg
    mimetype: image/svg
    inline: true
    title: "Facebook"
    alttext: "Facebook Logo"
  -
    id: facebook-thumb
    location: figures/thumb-facebook.png
    publisher: thumbnail
    for: facebook
    mimetype: image/png
    export: TRUE
  -
    id: twitter-thumb
    location: figures/thumb-twitter.png
    publisher: thumbnail
    for: twitter
    mimetype: image/png
    export: TRUE
  -
    id: landing-thumb
    location: figures/thumb-landing.png
    publisher: thumbnail
    for: landing
    mimetype: image/png
    export: TRUE
